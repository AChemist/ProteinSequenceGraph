{
    "collab_server" : "",
    "contents" : "\n# Load Libs ---------------------------------------------------------------\n\nlibrary(ggplot2)\nlibrary(plyr)\nlibrary(UniProt.ws)\n\n\n# Functions ---------------------------------------------------------------\n\n# sequence2Matrix <- function( sequence ){\n#   \n#   dim <- ceiling(sqrt(nchar(sequence)))\n#   diff <- dim * dim - nchar(sequence)\n#   sequence <- paste0(sequence, paste0(rep(\"-\", diff), collapse = \"\"), collapse = \"\")\n#   sequenceVector <- unlist(strsplit(sequence, split = \"\"))\n#   sequenceMatrix <- matrix( sequenceVector, ncol = dim,  nrow = dim, byrow = TRUE)\n#   \n#   # dim <- ceiling(nchar(sequence)/30)\n#   # diff <- dim * 30 - nchar(sequence)\n#   # sequence <- paste0(sequence, paste0(rep(\"-\", diff), collapse = \"\"), collapse = \"\")\n#   # sequenceVector <- unlist(strsplit(sequence, split = \"\"))\n#   # sequenceMatrix <- matrix( sequenceVector, ncol = 30,  nrow = dim, byrow = TRUE) \n#   return(sequenceMatrix)\n# }\n\nsequence2Dataframe <- function( sequence ){\n  \n  dim <- ceiling(sqrt(nchar(sequence)))\n  diff <- dim * dim - nchar(sequence)\n  sequence <- paste0(sequence, paste0(rep(\"-\", diff), collapse = \"\"), collapse = \"\")\n  sequenceVector <- unlist(strsplit(sequence, split = \"\"))\n  x <- rep(1:dim, dim)\n  y <- sort(rep(1:dim, dim)) \n  \n  \n  # dim <- ceiling(nchar(sequence)/30)\n  # diff <- dim * 30 - nchar(sequence)\n  # sequence <- paste0(sequence, paste0(rep(\"-\", diff), collapse = \"\"), collapse = \"\")\n  # sequenceVector <- unlist(strsplit(sequence, split = \"\"))\n  # sequenceMatrix <- matrix( sequenceVector, ncol = 30,  nrow = dim, byrow = TRUE) \n  return( data.frame( row = y, col = x, AA = sequenceVector, position = 1:(dim*dim) ) )\n}\n\nfetchSequence <- function( accession = \"P02671\" ){\n  \n  up <- UniProt.ws(taxId=9606)\n  \n  #keytypes(up)\n  \n  sequence <- select(up, accession, \"SEQUENCE\", \"UNIPROTKB\" )[1,2]\n\n  return(sequence)  \n}\n\n# fetchSequence <- function( accession = \"P02671\" ){\n#   \n#   up <- UniProt.ws(taxId=9606)\n#   \n#   #keytypes(up)\n#   \n#   test <- select(up, accession, \"PHOSSITE\", \"UNIPROTKB\" )\n#   \n#   return(sequence)  \n# }\n\n\n# Example -----------------------------------------------------------------\n\naccession <- \"P02671\"\n\nsequence <- fetchSequence(accession) \n\n#d <- sequence2Matrix(d)\n\nsequenceDframe <- sequence2Dataframe(sequence)\n\np <- ggplot(sequenceDframe, aes(col, row, label = AA)) + geom_text()\np <- p + scale_y_continuous(trans = \"reverse\")\np <- p + ggtitle(accession)\n\npsites <- c(37,88,3,678)\npsiteDframe <- sequenceDframe[ sequenceDframe$position %in% psites  ,]\n\np <- p + geom_text(data =  psiteDframe,  aes(col, row, label = AA), inherit.aes = FALSE, colour = \"red\")\n\npeptides <- data.frame(peptideSequence = c(\"Test\",\"Test\"), start = c(67,360), stop = c(80, 375))\npeptides <- ddply(peptides, .(), mutate, positions = start:stop )\npeptidePosition <- apply(peptides,2,1:2)\npeptidesDframe <- sequenceDframe[ sequenceDframe$position %in% psites  ,]\n \np\n\n\n\n\n",
    "created" : 1518816348114.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4109255108",
    "id" : "6924631A",
    "lastKnownWriteTime" : 1518829759,
    "last_content_update" : 1518829759053,
    "path" : "~/GitHub/ProteinSequenceGraph/ProteinSequenceGraph.R",
    "project_path" : "ProteinSequenceGraph.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}